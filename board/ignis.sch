EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:ugw
LIBS:ignis-cache
EELAYER 25 0
EELAYER END
$Descr USLedger 17000 11000
encoding utf-8
Sheet 1 1
Title "Ignis Control Board"
Date "2016-07-12"
Rev "Draft"
Comp "U.G. Wilson"
Comment1 "https://creativecommons.org/licenses/by-sa/4.0/"
Comment2 "Creative Commons Attribution-ShareAlike 4.0 International"
Comment3 "Copyright 2016 U.G. Wilson"
Comment4 ""
$EndDescr
$Comp
L TRIAC U4
U 1 1 5784795A
P 15150 4750
F 0 "U4" H 14900 5000 50  0000 C CNN
F 1 "TRIAC" H 14850 4500 50  0000 C CNN
F 2 "" H 15150 4750 50  0000 C CNN
F 3 "HQ6025LH5TP" V 15500 4850 50  0000 C CNN
	1    15150 4750
	1    0    0    -1  
$EndComp
$Comp
L PIC18F13K22 U1
U 1 1 578481D8
P 4650 3850
F 0 "U1" H 5400 5000 60  0000 C CNN
F 1 "PIC18F13K22" H 3950 5000 60  0000 C CNN
F 2 "" H 3850 5000 60  0000 C CNN
F 3 "" H 3850 5000 60  0000 C CNN
	1    4650 3850
	1    0    0    -1  
$EndComp
Text Notes 6550 900  0    60   ~ 0
INT0 is used to start current delay at zero point crossing.
$Comp
L C_Small C1
U 1 1 5784858A
P 1000 3050
F 0 "C1" H 1010 3120 50  0000 L CNN
F 1 "0.1 uF" H 1010 2970 50  0000 L CNN
F 2 "" H 1000 3050 50  0000 C CNN
F 3 "" H 1000 3050 50  0000 C CNN
	1    1000 3050
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 57848665
P 5600 2500
F 0 "#PWR?" H 5600 2250 50  0001 C CNN
F 1 "GND" H 5600 2350 50  0000 C CNN
F 2 "" H 5600 2500 50  0000 C CNN
F 3 "" H 5600 2500 50  0000 C CNN
	1    5600 2500
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR?
U 1 1 57848723
P 1000 2750
F 0 "#PWR?" H 1000 2600 50  0001 C CNN
F 1 "+5V" H 1000 2890 50  0000 C CNN
F 2 "" H 1000 2750 50  0000 C CNN
F 3 "" H 1000 2750 50  0000 C CNN
	1    1000 2750
	1    0    0    -1  
$EndComp
$Comp
L CONN_01X06 P?
U 1 1 578B2BE4
P 7250 4300
F 0 "P?" H 7250 4650 50  0000 C CNN
F 1 "FTDI" V 7350 4300 50  0000 C CNN
F 2 "" H 7250 4300 50  0000 C CNN
F 3 "" H 7250 4300 50  0000 C CNN
	1    7250 4300
	1    0    0    1   
$EndComp
$Comp
L GND #PWR?
U 1 1 578B2C62
P 6950 4650
F 0 "#PWR?" H 6950 4400 50  0001 C CNN
F 1 "GND" H 6950 4500 50  0000 C CNN
F 2 "" H 6950 4650 50  0000 C CNN
F 3 "" H 6950 4650 50  0000 C CNN
	1    6950 4650
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR?
U 1 1 578B2D1E
P 6950 3950
F 0 "#PWR?" H 6950 3800 50  0001 C CNN
F 1 "+5V" H 6950 4090 50  0000 C CNN
F 2 "" H 6950 3950 50  0000 C CNN
F 3 "" H 6950 3950 50  0000 C CNN
	1    6950 3950
	1    0    0    -1  
$EndComp
$Comp
L CONN_01X06 P?
U 1 1 578B2EE4
P 2200 1700
F 0 "P?" H 2200 2050 50  0000 C CNN
F 1 "PROG" V 2300 1700 50  0000 C CNN
F 2 "" H 2200 1700 50  0000 C CNN
F 3 "" H 2200 1700 50  0000 C CNN
	1    2200 1700
	-1   0    0    -1  
$EndComp
$Comp
L +5V #PWR?
U 1 1 578B302B
P 2500 1350
F 0 "#PWR?" H 2500 1200 50  0001 C CNN
F 1 "+5V" H 2500 1490 50  0000 C CNN
F 2 "" H 2500 1350 50  0000 C CNN
F 3 "" H 2500 1350 50  0000 C CNN
	1    2500 1350
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 578B36FD
P 1000 3250
F 0 "#PWR?" H 1000 3000 50  0001 C CNN
F 1 "GND" H 1000 3100 50  0000 C CNN
F 2 "" H 1000 3250 50  0000 C CNN
F 3 "" H 1000 3250 50  0000 C CNN
	1    1000 3250
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 578B3886
P 2500 2050
F 0 "#PWR?" H 2500 1800 50  0001 C CNN
F 1 "GND" H 2500 1900 50  0000 C CNN
F 2 "" H 2500 2050 50  0000 C CNN
F 3 "" H 2500 2050 50  0000 C CNN
	1    2500 2050
	1    0    0    -1  
$EndComp
$Comp
L CONN_01X02 P?
U 1 1 578B3DD6
P 6950 3600
F 0 "P?" H 6950 3750 50  0000 C CNN
F 1 "TYPE R" V 7050 3600 50  0000 C CNN
F 2 "" H 6950 3600 50  0000 C CNN
F 3 "" H 6950 3600 50  0000 C CNN
	1    6950 3600
	1    0    0    -1  
$EndComp
$Comp
L CONN_01X02 P?
U 1 1 578B3F57
P 7550 3100
F 0 "P?" H 7550 3250 50  0000 C CNN
F 1 "DOOR" V 7650 3100 50  0000 C CNN
F 2 "" H 7550 3100 50  0000 C CNN
F 3 "" H 7550 3100 50  0000 C CNN
	1    7550 3100
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 578B4D1D
P 6650 3750
F 0 "#PWR?" H 6650 3500 50  0001 C CNN
F 1 "GND" H 6650 3600 50  0000 C CNN
F 2 "" H 6650 3750 50  0000 C CNN
F 3 "" H 6650 3750 50  0000 C CNN
	1    6650 3750
	1    0    0    -1  
$EndComp
$Comp
L R_Small R?
U 1 1 578B4EAD
P 7250 2850
F 0 "R?" H 7280 2870 50  0000 L CNN
F 1 "10K" H 7280 2810 50  0000 L CNN
F 2 "" H 7250 2850 50  0000 C CNN
F 3 "" H 7250 2850 50  0000 C CNN
	1    7250 2850
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR?
U 1 1 578B4F2D
P 7250 2650
F 0 "#PWR?" H 7250 2500 50  0001 C CNN
F 1 "+5V" H 7250 2790 50  0000 C CNN
F 2 "" H 7250 2650 50  0000 C CNN
F 3 "" H 7250 2650 50  0000 C CNN
	1    7250 2650
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR?
U 1 1 578B4F8E
P 7250 3250
F 0 "#PWR?" H 7250 3000 50  0001 C CNN
F 1 "GND" H 7250 3100 50  0000 C CNN
F 2 "" H 7250 3250 50  0000 C CNN
F 3 "" H 7250 3250 50  0000 C CNN
	1    7250 3250
	1    0    0    -1  
$EndComp
$Comp
L CONN_01X02 P5
U 1 1 578B543E
P 15350 3750
F 0 "P5" H 15350 3900 50  0000 C CNN
F 1 "SAFETY" V 15450 3750 50  0000 C CNN
F 2 "" H 15350 3750 50  0000 C CNN
F 3 "" H 15350 3750 50  0000 C CNN
	1    15350 3750
	0    -1   -1   0   
$EndComp
$Comp
L PS2815-1 U2
U 1 1 578F1611
P 14200 2150
F 0 "U2" H 13850 1900 60  0000 C CNN
F 1 "PS2815-1" H 14350 1900 60  0000 C CNN
F 2 "ugw:PS2815-1" H 14250 1900 60  0001 C CNN
F 3 "PS2815-1" H 14350 1900 60  0000 C CNN
	1    14200 2150
	-1   0    0    1   
$EndComp
$Comp
L R_Small R1
U 1 1 578F1617
P 15150 2200
F 0 "R1" H 15180 2220 50  0000 L CNN
F 1 "22K" H 15180 2160 50  0000 L CNN
F 2 "" H 15150 2200 50  0000 C CNN
F 3 "H4P22KFZA" V 15400 2100 50  0000 C CNN
	1    15150 2200
	0    1    1    0   
$EndComp
$Comp
L R_Small R2
U 1 1 578F161D
P 15150 2050
F 0 "R2" H 15180 2070 50  0000 L CNN
F 1 "22K" H 15180 2010 50  0000 L CNN
F 2 "" H 15150 2050 50  0000 C CNN
F 3 "H4P22KFZA" V 15400 2150 50  0000 C CNN
	1    15150 2050
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR?
U 1 1 578F1629
P 13500 2600
F 0 "#PWR?" H 13500 2350 50  0001 C CNN
F 1 "GND" H 13500 2450 50  0000 C CNN
F 2 "" H 13500 2600 50  0000 C CNN
F 3 "" H 13500 2600 50  0000 C CNN
	1    13500 2600
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR?
U 1 1 578F1631
P 13500 1850
F 0 "#PWR?" H 13500 1700 50  0001 C CNN
F 1 "+5V" H 13500 1990 50  0000 C CNN
F 2 "" H 13500 1850 50  0000 C CNN
F 3 "" H 13500 1850 50  0000 C CNN
	1    13500 1850
	1    0    0    -1  
$EndComp
$Comp
L R_Small R?
U 1 1 578F1637
P 13500 2400
F 0 "R?" H 13530 2420 50  0000 L CNN
F 1 "10K" H 13530 2360 50  0000 L CNN
F 2 "" H 13500 2400 50  0000 C CNN
F 3 "" H 13500 2400 50  0000 C CNN
	1    13500 2400
	1    0    0    -1  
$EndComp
Text Notes 13700 2850 0    60   ~ 0
This is the zero cross detection \ncircuit. It will spike low when \nthe AC crosses zero.
$Comp
L CONN_01X01 P1
U 1 1 57CA5948
P 15350 1000
F 0 "P1" H 15350 1100 50  0000 C CNN
F 1 "GND" V 15450 1000 50  0000 C CNN
F 2 "" H 15350 1000 50  0000 C CNN
F 3 "" H 15350 1000 50  0000 C CNN
	1    15350 1000
	0    -1   -1   0   
$EndComp
$Comp
L CONN_01X01 P2
U 1 1 57CA599B
P 15650 1000
F 0 "P2" H 15650 1100 50  0000 C CNN
F 1 "HOT" V 15750 1000 50  0000 C CNN
F 2 "" H 15650 1000 50  0000 C CNN
F 3 "" H 15650 1000 50  0000 C CNN
	1    15650 1000
	0    -1   -1   0   
$EndComp
$Comp
L CONN_01X01 P3
U 1 1 57CA59E2
P 15950 1000
F 0 "P3" H 15950 1100 50  0000 C CNN
F 1 "NEUTRAL" V 16050 1000 50  0000 C CNN
F 2 "" H 15950 1000 50  0000 C CNN
F 3 "" H 15950 1000 50  0000 C CNN
	1    15950 1000
	0    -1   -1   0   
$EndComp
$Comp
L GND #PWR?
U 1 1 57CA5CFB
P 15350 1350
F 0 "#PWR?" H 15350 1100 50  0001 C CNN
F 1 "GND" H 15350 1200 50  0000 C CNN
F 2 "" H 15350 1350 50  0000 C CNN
F 3 "" H 15350 1350 50  0000 C CNN
	1    15350 1350
	1    0    0    -1  
$EndComp
$Comp
L CONN_01X02 P4
U 1 1 57CA7079
P 14800 4100
F 0 "P4" H 14800 4250 50  0000 C CNN
F 1 "LOAD" V 14900 4100 50  0000 C CNN
F 2 "" H 14800 4100 50  0000 C CNN
F 3 "" H 14800 4100 50  0000 C CNN
	1    14800 4100
	-1   0    0    -1  
$EndComp
$Comp
L FODM3022 U3
U 1 1 57CA8B2D
P 13750 4400
F 0 "U3" H 13550 4600 50  0000 L CNN
F 1 "FODM3022" H 13750 4600 50  0000 L CNN
F 2 "MFP4L" H 13550 4200 50  0001 L CIN
F 3 "FODM3022R2V_NF098" H 13400 4150 50  0000 L CNN
	1    13750 4400
	1    0    0    -1  
$EndComp
$Comp
L R R3
U 1 1 57CA94DA
P 14450 4300
F 0 "R3" V 14530 4300 50  0000 C CNN
F 1 "180" V 14450 4300 50  0000 C CNN
F 2 "" V 14380 4300 50  0000 C CNN
F 3 "" H 14450 4300 50  0000 C CNN
	1    14450 4300
	0    1    1    0   
$EndComp
$Comp
L R R4
U 1 1 57CA9772
P 13100 4300
F 0 "R4" V 13180 4300 50  0000 C CNN
F 1 "390" V 13100 4300 50  0000 C CNN
F 2 "" V 13030 4300 50  0000 C CNN
F 3 "" H 13100 4300 50  0000 C CNN
	1    13100 4300
	0    1    1    0   
$EndComp
$Comp
L +5V #PWR?
U 1 1 57CA9B30
P 12850 4200
F 0 "#PWR?" H 12850 4050 50  0001 C CNN
F 1 "+5V" H 12850 4340 50  0000 C CNN
F 2 "" H 12850 4200 50  0000 C CNN
F 3 "" H 12850 4200 50  0000 C CNN
	1    12850 4200
	1    0    0    -1  
$EndComp
Text Notes 13050 4050 0    60   ~ 0
Load circuit using a random phase \nTRIAC output optocoupler\nto hi trip a TRIAC.  No on board\nover-current protection other than \nan inline safety port.
Wire Wire Line
	6950 4650 6950 4550
Wire Wire Line
	6950 4550 7050 4550
Wire Wire Line
	6950 3950 6950 4350
Wire Wire Line
	6950 4350 7050 4350
Wire Wire Line
	3350 4250 7050 4250
Wire Wire Line
	5900 4150 7050 4150
Wire Wire Line
	5800 2850 5700 2850
Wire Wire Line
	5800 2400 5800 2850
Wire Wire Line
	5800 2400 5600 2400
Wire Wire Line
	5600 2400 5600 2500
Wire Wire Line
	2400 1550 2500 1550
Wire Wire Line
	2500 1550 2500 1350
Wire Wire Line
	3450 3150 3050 3150
Wire Wire Line
	3050 3150 3050 1450
Wire Wire Line
	3050 1450 2400 1450
Wire Wire Line
	2400 1650 2500 1650
Wire Wire Line
	2500 1650 2500 2050
Wire Wire Line
	2400 1750 5900 1750
Wire Wire Line
	5900 1750 5900 2950
Wire Wire Line
	5900 2950 5700 2950
Wire Wire Line
	5700 3050 7350 3050
Wire Wire Line
	6000 3050 6000 1850
Wire Wire Line
	6000 1850 2400 1850
Wire Wire Line
	2400 1950 2850 1950
Wire Wire Line
	2850 1950 2850 3450
Wire Wire Line
	2850 3450 3450 3450
Wire Wire Line
	5700 3650 5900 3650
Wire Wire Line
	5900 3650 5900 4150
Wire Wire Line
	3350 4250 3350 3750
Wire Wire Line
	3350 3750 3450 3750
Wire Wire Line
	3450 3350 3050 3350
Wire Wire Line
	3050 3350 3050 4450
Wire Wire Line
	3450 3250 2950 3250
Wire Wire Line
	2950 3250 2950 4050
Wire Wire Line
	2950 4050 7050 4050
Wire Wire Line
	3050 4450 7050 4450
Wire Wire Line
	3450 2850 1000 2850
Wire Wire Line
	1000 2750 1000 2950
Connection ~ 1000 2850
Wire Wire Line
	1000 3250 1000 3150
Wire Wire Line
	6750 3550 5700 3550
Wire Wire Line
	6650 3750 6650 3650
Wire Wire Line
	6650 3650 6750 3650
Wire Wire Line
	7250 2650 7250 2750
Wire Wire Line
	7250 2950 7250 3050
Connection ~ 7250 3050
Wire Wire Line
	7250 3250 7250 3150
Wire Wire Line
	7250 3150 7350 3150
Connection ~ 6000 3050
Wire Wire Line
	14800 2050 15050 2050
Wire Wire Line
	15050 2200 14800 2200
Wire Wire Line
	15250 2050 15650 2050
Wire Wire Line
	15250 2200 15950 2200
Wire Wire Line
	5900 2200 13600 2200
Wire Wire Line
	13500 2200 13500 2300
Wire Wire Line
	13500 2600 13500 2500
Wire Wire Line
	13500 1850 13500 2050
Connection ~ 5900 2200
Connection ~ 13500 2200
Wire Wire Line
	13500 2050 13600 2050
Wire Wire Line
	15650 1200 15650 4050
Wire Wire Line
	15950 1200 15950 5250
Connection ~ 15650 2050
Wire Wire Line
	15000 4150 15150 4150
Wire Wire Line
	15150 4150 15150 4350
Wire Wire Line
	15150 5250 15150 5000
Connection ~ 15950 2200
Wire Wire Line
	15650 4050 15400 4050
Wire Wire Line
	15400 4050 15400 3950
Wire Wire Line
	15300 3950 15300 4050
Wire Wire Line
	15300 4050 15000 4050
Wire Wire Line
	14050 4300 14300 4300
Wire Wire Line
	14600 4300 15150 4300
Connection ~ 15150 4300
Wire Wire Line
	14650 4950 14350 4950
Wire Wire Line
	14350 4950 14350 4500
Wire Wire Line
	14350 4500 14050 4500
Wire Wire Line
	13250 4300 13450 4300
Wire Wire Line
	12850 4200 12850 4300
Wire Wire Line
	12850 4300 12950 4300
Wire Wire Line
	15350 1350 15350 1200
Wire Notes Line
	13350 1600 15350 1600
Wire Notes Line
	15350 1600 15350 2950
Wire Notes Line
	15350 2950 13350 2950
Wire Notes Line
	13350 2950 13350 1600
Wire Wire Line
	15950 5250 15150 5250
Wire Notes Line
	12700 3500 15750 3500
Wire Notes Line
	15750 3500 15750 5150
Wire Notes Line
	15750 5150 12700 5150
Wire Notes Line
	12700 5150 12700 3500
Text Notes 15200 800  0    60   ~ 0
AC Input Connections
Wire Notes Line
	15100 650  16250 650 
Wire Notes Line
	16250 650  16250 1250
Wire Notes Line
	16250 1250 15100 1250
Wire Notes Line
	15100 1250 15100 650 
$Comp
L ZENER D?
U 1 1 57CB7757
P 6550 6250
F 0 "D?" H 6550 6350 50  0000 C CNN
F 1 "ZENER" H 6550 6150 50  0000 C CNN
F 2 "" H 6550 6250 50  0000 C CNN
F 3 "" H 6550 6250 50  0000 C CNN
	1    6550 6250
	1    0    0    -1  
$EndComp
Text Notes 3600 7200 0    60   ~ 0
Need a Non-isolating Zener supply to get +5V from mains if FTDI can't support the MCU.
Wire Wire Line
	5700 3750 5800 3750
Wire Wire Line
	5800 3750 5800 4900
Wire Wire Line
	5800 4900 12850 4900
Wire Wire Line
	12850 4900 12850 4500
Wire Wire Line
	12850 4500 13450 4500
$EndSCHEMATC
